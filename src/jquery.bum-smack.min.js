(function(e){"use strict";var t,n,r,i,s,o,u,a;e.fn.smack=function(f){f=f||{};t=e(this),n=new e.Deferred,r=f.threshold||1;t.on("scroll.smack",function(){i=t.scrollTop();s=t[0]===window?t.height():t.innerHeight(),o=t[0]===window?e(document).height():t[0].scrollHeight,u=i+s,a=r.toString().toLowerCase().indexOf("px")>=0?o-parseInt(r):o*r;if(u>=a){t.off("scroll.smack");n.resolve()}});return n.promise()}})(window.jQuery)